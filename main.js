/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DSAPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/view/DSAView.ts
var import_obsidian2 = require("obsidian");
var import_child_process = require("child_process");

// src/modal/CreateHeroModal.ts
var import_obsidian = require("obsidian");

// src/data/HeroData.ts
var HeroData = class {
  constructor(id, name) {
    this.id = id;
    this.name = name;
  }
  toHeroData() {
    return new HeroData(this.id, this.name);
  }
};

// src/modal/CreateHeroModal.ts
var HeroCreationData = class extends HeroData {
  constructor(id, name, dataSheet) {
    super(id, name);
    this.dataSheet = dataSheet;
  }
};
var CreateHeroModal = class extends import_obsidian.Modal {
  constructor(plugin, onSubmit) {
    super(plugin.app);
    this.setTitle("DSA - Neuer Held");
    let id = "";
    let name = "";
    let jsonData = {};
    new import_obsidian.Setting(this.contentEl).setName("Ordnername").addText((text) => text.onChange((value) => {
      id = value;
    }));
    new import_obsidian.Setting(this.contentEl).setName("Anzeigename").addText((text) => text.onChange((value) => {
      name = value;
    }));
    new import_obsidian.Setting(this.contentEl).setName("Optolith Json Datei").addButton((button) => {
      button.setButtonText("Choose File").onClick(() => {
        const fileInput = document.createElement("input");
        fileInput.type = "file";
        fileInput.accept = ".json";
        fileInput.style.display = "none";
        fileInput.addEventListener("change", async (event) => {
          const target = event.target;
          if (!target.files || !target.files.length)
            return;
          const file = target.files[0];
          const fileText = await file.text();
          try {
            JSON.parse(fileText);
            new import_obsidian.Notice("File uploaded successfully!");
            jsonData = fileText;
          } catch (error) {
            new import_obsidian.Notice("Invalid JSON file");
          }
        });
        fileInput.click();
      });
    });
    new import_obsidian.Setting(this.contentEl).addButton((btn) => btn.setButtonText("Erstellen").setCta().onClick(() => {
      this.close();
      onSubmit(new HeroCreationData(id, name, jsonData));
    }));
  }
};

// src/view/DSAView.ts
var DSAView = class extends import_obsidian2.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getDisplayText() {
    return "DSA - ";
  }
  getIcon() {
    return "dice";
  }
  onOpen() {
    this.containerEl.empty();
    this.containerEl.addClass("dsa-view");
    const header = this.containerEl.createDiv({ cls: "dsa-header" });
    const banner = header.createDiv({ cls: "dsa-banner" });
    const navigationBox = header.createDiv({ cls: "dsa-navigation-box" });
    const navigation = navigationBox.createEl("ul");
    navigation.createEl("li").createEl("button", { text: "Heldenliste" }).onclick = () => {
      this.plugin.viewOpener.openHeroListView();
    };
    navigation.createEl("li").createEl("button", { text: "Neuer Held" }).onclick = () => {
      new CreateHeroModal(this.plugin, (result) => {
        if (!result.name || !result.id) {
          new import_obsidian2.Notice("Bitte Name und ID f\xFCr den Held angeben");
          return;
        }
        if (this.plugin.heroManager.getHeroData(result.id)) {
          new import_obsidian2.Notice("Ordnername bereits vergeben");
          return;
        }
        this.plugin.heroManager.createHero(result.toHeroData());
        this.plugin.heroManager.pushNewDataSheet(result.id, result.dataSheet).then((r) => {
          this.plugin.viewOpener.openHeroOverview(result.id);
        });
      }).open();
    };
    navigation.createEl("li").createEl("button", { text: "Optolith" }).onclick = () => {
      this.openOptolith();
    };
    navigation.createEl("li").createEl("button", { text: "Tokenizer" }).onclick = () => {
      this.plugin.viewOpener.openTokenizerView();
    };
    header.createEl("h1", { text: this.getTitle(), cls: "dsa-view-title" });
    header.createEl("hr");
    return super.onOpen();
  }
  createContentElement(clazz = "") {
    return this.containerEl.createDiv({ cls: `dsa-content ${clazz}` });
  }
  openOptolith() {
    let optolithPath = this.plugin.settings.optolithPath;
    if (!optolithPath) {
      new import_obsidian2.Notice("Bitte den Pfad zu Optolith in den Einstellungen festlegen");
      return;
    }
    if (!optolithPath.startsWith('"') && !optolithPath.endsWith('"')) {
      optolithPath = `"${optolithPath}"`;
    }
    if (this.isProgramRunning(optolithPath)) {
      new import_obsidian2.Notice("Optolith l\xE4uft bereits.");
      this.focusExistingProgram(optolithPath);
    } else {
      (0, import_child_process.exec)(optolithPath, (error, stdout, stderr) => {
        if (error) {
          new import_obsidian2.Notice(`Fehler beim \xD6ffnen von Optolith: ${error.message}`);
          return;
        }
      });
    }
  }
  isProgramRunning(programPath) {
    const programName = this.getExecutableName(programPath);
    let command;
    if (process.platform === "win32") {
      command = `tasklist | findstr /i ${programName}`;
    } else if (process.platform === "darwin") {
      command = `pgrep -f ${programName}`;
    } else {
      command = `pgrep -f ${programName}`;
    }
    try {
      const result = (0, import_child_process.execSync)(command, { stdio: "pipe" });
      return result.length > 0;
    } catch (e) {
      return false;
    }
  }
  focusExistingProgram(programPath) {
    const programName = this.getExecutableName(programPath).replace(".exe", "").replace('"', "");
  }
  // Function to extract the executable name from the program path
  getExecutableName(programPath) {
    const parts = programPath.split(/[/\\]/);
    return parts[parts.length - 1];
  }
};

// src/view/HeroListView.ts
var VIEW_HERO_LIST = "hero-list";
var HeroListView = class extends DSAView {
  constructor(leaf, plugin) {
    super(leaf, plugin);
    this.registerEvent(this.app.workspace.on("active-leaf-change", (leaf2) => {
      if (leaf2.view instanceof HeroListView) {
        this.onOpen();
      }
    }));
  }
  getViewType() {
    return VIEW_HERO_LIST;
  }
  getDisplayText() {
    return `${super.getDisplayText()}Heldenliste`;
  }
  getTitle() {
    return "Deine Helden";
  }
  async onOpen() {
    await super.onOpen();
    const listContainer = this.createContentElement(VIEW_HERO_LIST);
    const { heroManager } = this.plugin;
    heroManager.validateHeroData();
    const heroes = heroManager.getHeroes();
    const heroList = listContainer.createDiv();
    heroList.addClass("dsa-hero-list");
    for (let i = 0; i < heroes.length; i++) {
      const hero = heroes[i];
      const heroItemWrapper = heroList.createDiv();
      heroItemWrapper.addClass("hero-item-wrapper");
      const heroItem = heroItemWrapper.createEl("button");
      heroItem.addClass("hero-item");
      heroManager.getHeroDataSheet(hero.id).then((value) => {
        if (!value)
          return;
        heroItem.style.backgroundImage = `url(${value.avatar})`;
      });
      const nameWrapper = heroItemWrapper.createDiv();
      nameWrapper.addClass("name-wrapper");
      nameWrapper.createDiv({ text: hero.name }).addClass("name");
      heroItem.onclick = () => {
        this.plugin.viewOpener.openHeroOverview(hero.id);
      };
    }
  }
  async onClose() {
  }
};

// src/data/HeroManager.ts
var import_obsidian3 = require("obsidian");

// src/data/DataSheet.ts
var ATTR_MU = "ATTR_1";
var ATTR_KL = "ATTR_2";
var ATTR_IN = "ATTR_3";
var ATTR_CH = "ATTR_4";
var ATTR_FF = "ATTR_5";
var ATTR_GE = "ATTR_6";
var ATTR_KO = "ATTR_7";
var ATTR_KK = "ATTR_8";
var ADV_MAGIC = "ADV_50";
var ADV_CONSECRATED = "ADV_12";
var RACE_HUMAN = "R_1";
var RACE_ELF = "R_2";
var RACE_HALFELF = "R_3";
var RACE_DWARF = "R_4";
var Races = [
  {
    id: RACE_HUMAN,
    name: "Mensch",
    lp: 5
  },
  {
    id: RACE_ELF,
    name: "Elf",
    lp: 2
  },
  {
    id: RACE_HALFELF,
    name: "Halfelf",
    lp: 5
  },
  {
    id: RACE_DWARF,
    name: "Zwerg",
    lp: 8
  }
];
var DataSheet = class {
  constructor() {
    this.name = "Unknown Hero";
    this.avatar = "";
    this.ap = {
      total: 0
    };
    this.r = "";
    this.pers = {
      family: "",
      placeofbirth: "",
      dateofbirth: "",
      age: 0,
      size: "",
      weight: "",
      title: ""
    };
    this.attr = {
      values: [],
      attributeAdjustmentSelected: "",
      ae: 0,
      kp: 0,
      lp: 0,
      permanentAE: {
        lost: 0,
        redeemed: 0
      },
      permanentKP: {
        lost: 0,
        redeemed: 0
      },
      permanentLP: {
        lost: 0
      }
    };
    this.sex = "";
    this.activatable = {};
  }
  getRace() {
    return Races.find((race) => race.id === this.r);
  }
  getMaxHealth() {
    var _a;
    const ko = this.getAttributeById(ATTR_KO);
    let baseValue = (((_a = this.getRace()) == null ? void 0 : _a.lp) || 0) + ko + ko;
    baseValue += this.attr.lp;
    baseValue -= this.attr.permanentLP.lost;
    return baseValue;
  }
  getMaxAstralEnergy() {
    if (!this.hasActivatable(ADV_MAGIC)) {
      return 0;
    }
    let baseValue = this.getAttributeById(this.attr.attributeAdjustmentSelected) + 20;
    baseValue -= this.attr.ae;
    baseValue -= this.attr.permanentAE.lost + this.attr.permanentAE.redeemed;
    return baseValue;
  }
  getMaxKarmaEnergy() {
    if (!this.hasActivatable(ADV_CONSECRATED)) {
      return 0;
    }
    let baseValue = this.getAttributeById(this.attr.attributeAdjustmentSelected) + 20;
    baseValue -= this.attr.kp;
    baseValue -= this.attr.permanentKP.lost + this.attr.permanentKP.redeemed;
    return baseValue;
  }
  getAttributeById(id) {
    const attribute = this.attr.values.find((attr) => attr.id === id);
    if (attribute) {
      return attribute.value;
    } else {
      return 8;
    }
  }
  hasActivatable(id) {
    return this.activatable.hasOwnProperty(id);
  }
  // Static method to create a new DataSheet instance from JSON
  static fromJson(jsonData) {
    const dataSheet = new DataSheet();
    Object.assign(dataSheet, jsonData);
    return dataSheet;
  }
};

// src/data/HeroManager.ts
var HeroManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async reloadData() {
    await this.plugin.loadSettings();
  }
  validateHeroData() {
    this.plugin.settings.heroesList.forEach(async (value) => {
      const folderName = value.id;
      const folderPath = this.plugin.settings.heroPath + "/" + folderName;
      if (!this.plugin.app.vault.getFolderByPath(folderPath)) {
        await this.plugin.app.vault.createFolder(folderPath);
      }
    });
  }
  getHeroData(heroId) {
    return this.plugin.settings.heroesList.find((hero) => hero.id === heroId);
  }
  getHeroDataSheet(heroId) {
    return new Promise(async (resolve) => {
      const folderPath = this.plugin.settings.heroPath + "/" + heroId;
      const fileName = "data.json";
      const filePath = folderPath + "/" + fileName;
      const file = this.plugin.app.vault.getAbstractFileByPath(filePath);
      if (!file) {
        console.error(`File not found: ${filePath}`);
        resolve(void 0);
        return;
      }
      const dataSheet = await this.readJsonFile(file);
      resolve(dataSheet);
    });
  }
  getHeroes() {
    return this.plugin.settings.heroesList;
  }
  createHero(heroData) {
    this.plugin.settings.heroesList.push(heroData);
    this.plugin.saveSettings();
    this.validateHeroData();
  }
  deleteHero(id) {
    const index = this.plugin.settings.heroesList.findIndex((hero) => hero.id === id);
    if (index > -1) {
      this.plugin.settings.heroesList.splice(index, 1);
      this.plugin.saveSettings();
    }
  }
  async deleteHeroFolder(heroId) {
    const folderPath = this.plugin.settings.heroPath + "/" + heroId;
    const folder = this.plugin.app.vault.getAbstractFileByPath(folderPath);
    if (folder) {
      await this.plugin.app.vault.adapter.rmdir(folderPath, true);
    }
  }
  async pushNewDataSheet(heroId, jsonData) {
    await this.saveNewDataSheet(heroId, jsonData);
    this.extractPortraitAsFile(heroId).then();
  }
  async extractPortraitAsFile(heroId) {
    const heroDataSheet = await this.getHeroDataSheet(heroId);
    const avatar = heroDataSheet == null ? void 0 : heroDataSheet.avatar;
    if (!avatar)
      return;
    const folderPath = `${this.plugin.settings.heroPath}/${heroId}`;
    const filename = `portrait.png`;
    try {
      await this.saveBase64Image(avatar, `${folderPath}/${filename}`);
    } catch (error) {
      console.error("Failed to save avatar image:", error);
      new import_obsidian3.Notice(`Failed to save avatar for heroId: ${heroId}`);
    }
  }
  async saveBase64Image(base64Data, filePath) {
    const base64Image = base64Data.replace(/^data:image\/png;base64,/, "");
    const binaryString = atob(base64Image);
    const len = binaryString.length;
    const bytes = new Uint8Array(len);
    for (let i = 0; i < len; i++) {
      bytes[i] = binaryString.charCodeAt(i);
    }
    const arrayBuffer = bytes.buffer;
    await this.plugin.app.vault.createBinary(filePath, arrayBuffer);
  }
  async saveNewDataSheet(heroId, jsonData) {
    const folderPath = `${this.plugin.settings.heroPath}/${heroId}`;
    const fileName = "data.json";
    const filePath = `${folderPath}/${fileName}`;
    const folder = this.plugin.app.vault.getAbstractFileByPath(folderPath);
    if (folder) {
      await this.saveJsonToFile(filePath, jsonData);
    } else {
      try {
        await this.plugin.app.vault.createFolder(folderPath);
        await this.saveJsonToFile(filePath, jsonData);
      } catch (error) {
        console.error(`Failed to create folder: ${error}`);
        new import_obsidian3.Notice(`Error creating folder: ${error.message}`);
      }
    }
  }
  async readJsonFile(file) {
    try {
      const fileContent = await this.plugin.app.vault.read(file);
      const jsonData = JSON.parse(fileContent);
      return DataSheet.fromJson(jsonData);
    } catch (error) {
      console.error(`Error reading JSON file: ${error}`);
      return void 0;
    }
  }
  async saveJsonToFile(filePath, jsonData) {
    try {
      const blob = new Blob([jsonData], { type: "application/json" });
      await this.plugin.app.vault.adapter.writeBinary(filePath, await this.blobToArrayBuffer(blob));
    } catch (error) {
      console.error(`Error saving file: ${error}`);
      new import_obsidian3.Notice(`Error saving file: ${error.message}`);
    }
  }
  async blobToArrayBuffer(blob) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = reject;
      reader.readAsArrayBuffer(blob);
    });
  }
};

// src/view/ViewOpener.ts
var import_obsidian5 = require("obsidian");

// src/modal/ConfirmWarningModal.ts
var import_obsidian4 = require("obsidian");
var defaultStyle = {
  title: "Best\xE4tigen?",
  description: "",
  confirmButtonText: "Best\xE4tigen",
  cancelButtonText: "Abbrechen"
};
var ConfirmWarningModal = class extends import_obsidian4.Modal {
  constructor(plugin, style = defaultStyle, onSubmit) {
    super(plugin.app);
    this.setTitle(style.title);
    this.contentEl.createEl("p", { text: style.description });
    new import_obsidian4.Setting(this.contentEl).addButton((btn) => btn.setButtonText(style.cancelButtonText).setCta().onClick(() => {
      this.close();
    })).addButton((btn) => btn.setButtonText(style.confirmButtonText).setCta().setWarning().onClick(() => {
      this.close();
      onSubmit();
    }));
  }
};

// src/view/HeroOverview.ts
var VIEW_HERO_OVERVIEW = "hero-overview";
var HeroOverview = class extends DSAView {
  constructor(leaf, plugin) {
    super(leaf, plugin);
    this.id = "";
  }
  getHeroData() {
    return this.plugin.heroManager.getHeroData(this.id);
  }
  async getDataSheet() {
    const dataSheet = await this.plugin.heroManager.getHeroDataSheet(this.id);
    if (!dataSheet) {
      return new DataSheet();
    }
    return dataSheet;
  }
  getDisplayText() {
    var _a;
    return `${super.getDisplayText()} ${((_a = this.getHeroData()) == null ? void 0 : _a.name) || "Unknown Hero"}`;
  }
  getViewType() {
    return VIEW_HERO_OVERVIEW;
  }
  async onOpen() {
    var _a;
    const heroId = (_a = this.getState()) == null ? void 0 : _a.id;
    if (heroId) {
      this.id = heroId;
    } else {
      return;
    }
    await super.onOpen();
    const overview = this.createContentElement("dsa-hero-overview");
    const dataSheet = await this.getDataSheet();
    const heroPage = overview.createDiv({ cls: "hero-page" });
    const attributesCard = heroPage.createDiv({ cls: "hero-card" });
    attributesCard.createEl("h1", { cls: "name", text: `${dataSheet.name || "Unknown Hero"} ${dataSheet.pers.title ? `"${dataSheet.pers.title}"` : ""} ${dataSheet.pers.family || ""} (${dataSheet.ap.total} AP)` });
    const attributes = attributesCard.createDiv({ cls: "attributes" });
    this.createLabel(attributes, "MU").createDiv({ cls: "attribute mu", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_MU)}` });
    this.createLabel(attributes, "KL").createDiv({ cls: "attribute kl", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_KL)}` });
    this.createLabel(attributes, "IN").createDiv({ cls: "attribute in", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_IN)}` });
    this.createLabel(attributes, "CH").createDiv({ cls: "attribute ch", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_CH)}` });
    this.createLabel(attributes, "FF").createDiv({ cls: "attribute ff", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_FF)}` });
    this.createLabel(attributes, "GE").createDiv({ cls: "attribute ge", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_GE)}` });
    this.createLabel(attributes, "KO").createDiv({ cls: "attribute ko", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_KO)}` });
    this.createLabel(attributes, "KK").createDiv({ cls: "attribute kk", text: `${dataSheet == null ? void 0 : dataSheet.getAttributeById(ATTR_KK)}` });
    const portraitCard = heroPage.createDiv({ cls: "hero-card portrait-card" });
    const heroPortrait = portraitCard.createDiv({ cls: "hero-portrait" });
    heroPortrait.style.backgroundImage = `url(${dataSheet == null ? void 0 : dataSheet.avatar})`;
    const bars = portraitCard.createDiv({ cls: "progress-bars" });
    this.createLabel(bars, "Lebensenergie").appendChild(this.createProgressbar(dataSheet.getMaxHealth(), dataSheet.getMaxHealth(), ["bg-health"]));
    const maxAstralEnergy = dataSheet.getMaxAstralEnergy();
    if (maxAstralEnergy > 0) {
      this.createLabel(bars, "Astralenergie").appendChild(this.createProgressbar(maxAstralEnergy, maxAstralEnergy, ["bg-astral"]));
    }
    const maxKarmaEnergy = dataSheet.getMaxKarmaEnergy();
    if (maxKarmaEnergy > 0) {
      this.createLabel(bars, "Karmaenergie").appendChild(this.createProgressbar(maxKarmaEnergy, maxKarmaEnergy, ["bg-karma"]));
    }
    const manageButtons = overview.createDiv({ cls: "manage-buttons" });
    const deleteButton = manageButtons.createEl("button", { text: "L\xF6schen", cls: "button delete" });
    deleteButton.onclick = () => {
      const modalStyle = {
        title: "Held l\xF6schen?",
        description: "Soll der ausgew\xE4hlte Hero wirklich gel\xF6scht werden?",
        confirmButtonText: "L\xF6schen",
        cancelButtonText: "Abbrechen"
      };
      new ConfirmWarningModal(this.plugin, modalStyle, () => {
        this.plugin.heroManager.deleteHero(this.id);
        this.leaf.detach();
        this.plugin.viewOpener.openHeroListView();
      }).open();
    };
  }
  createLabel(parent, labelText) {
    const wrapper = parent.createDiv({ cls: "labeled-element" });
    wrapper.createDiv({ cls: "labeled-text", text: labelText });
    return wrapper;
  }
  createProgressbar(max, value, classes) {
    const progress = createDiv({ cls: "progress" });
    const progressBar = progress.createDiv({ cls: "progress-bar" });
    if (max > 0) {
      progressBar.style.width = `${value / max * 100}%`;
    } else {
      progressBar.style.width = "0%";
    }
    progressBar.addClasses(classes);
    progress.createDiv({ cls: "progress-value-label", text: `${value} / ${max}` });
    return progress;
  }
  getState() {
    return {
      id: this.id
    };
  }
  async setState(state, result) {
    if (state && typeof state === "object") {
      if ("id" in state && state.id && typeof state.id === "string") {
        this.id = state.id;
        this.onOpen();
      }
    }
    super.setState(state, result);
  }
  async onClose() {
  }
  getTitle() {
    return `Helden\xFCbersicht`;
  }
};

// src/view/TokenizerView.ts
var VIEW_TOKENIZER = "tokenizer";
var TokenizerView = class extends DSAView {
  constructor(leaf, plugin) {
    super(leaf, plugin);
  }
  getTitle() {
    return "Tokenizer";
  }
  getViewType() {
    return VIEW_TOKENIZER;
  }
  getDisplayText() {
    return `${super.getDisplayText()}Tokenizer`;
  }
  async onOpen() {
    await super.onOpen();
    const container = this.containerEl;
    const iframe = container.createEl("iframe", {
      attr: {
        src: "https://rolladvantage.com/tokenstamp/",
        style: "width: 100%; height: 100%; border: none;"
        // Ensure it fills the container
      }
    });
    re;
  }
};

// src/view/ViewOpener.ts
var ViewOpener = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  openTokenizerView() {
    this.openOrRevealView(VIEW_TOKENIZER);
  }
  openHeroListView() {
    this.openOrRevealView(VIEW_HERO_LIST);
  }
  openHeroOverview(id) {
    this.openView(VIEW_HERO_OVERVIEW, true, { id });
  }
  async openOrRevealView(type) {
    const { workspace } = this.plugin.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(type);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(true);
      await leaf.setViewState({ type, active: true });
    }
    if (leaf instanceof import_obsidian5.WorkspaceLeaf) {
      workspace.revealLeaf(leaf).then((r) => {
      });
    }
  }
  async openView(type, openInNewTab, state) {
    const { workspace } = this.plugin.app;
    const leaf = workspace.getLeaf(openInNewTab);
    await leaf.setViewState({
      type,
      // @ts-ignore
      state
    });
    workspace.setActiveLeaf(leaf);
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  heroPath: "",
  optolithPath: "",
  heroesList: []
};
var DSAPlugin = class extends import_obsidian6.Plugin {
  injectSVGFilter() {
    const svgFilter = `
            <svg style="display:none;">
                <filter id="wavy2">
                    <feTurbulence x="0" y="0" baseFrequency="0.02" numOctaves="5" seed="1" />
                    <feDisplacementMap in="SourceGraphic" scale="20" />
                </filter>
            </svg>
        `;
    document.body.insertAdjacentHTML("afterbegin", svgFilter);
  }
  async onload() {
    await this.loadSettings();
    this.heroManager = new HeroManager(this);
    this.viewOpener = new ViewOpener(this);
    this.injectSVGFilter();
    const dsaRibbon = this.addRibbonIcon("dice", "Heldenliste", (evt) => {
      this.viewOpener.openHeroListView();
    });
    this.addCommand({
      id: "open-characters-view",
      name: "Heldenliste \xF6ffnen",
      callback: () => {
        this.viewOpener.openHeroListView();
      }
    });
    this.addSettingTab(new DSASettingsTab(this.app, this));
    this.registerView(
      VIEW_HERO_LIST,
      (leaf) => {
        return new HeroListView(leaf, this);
      }
    );
    this.registerView(
      VIEW_HERO_OVERVIEW,
      (leaf) => {
        return new HeroOverview(leaf, this);
      }
    );
    this.registerView(
      VIEW_TOKENIZER,
      (leaf) => {
        return new TokenizerView(leaf, this);
      }
    );
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var DSASettingsTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian6.Setting(containerEl).setName("Hero Location").setDesc("Where do you want to have your character files saved?").addText((text) => text.setPlaceholder("/path/to/characters").setValue(this.plugin.settings.heroPath).onChange(async (value) => {
      this.plugin.settings.heroPath = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian6.Setting(containerEl).setName("Optolith install location").setDesc("Where is Optolith installed?").addText((text) => text.setPlaceholder("/path/to/optolith").setValue(this.plugin.settings.optolithPath).onChange(async (value) => {
      this.plugin.settings.optolithPath = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvdmlldy9EU0FWaWV3LnRzIiwgInNyYy9tb2RhbC9DcmVhdGVIZXJvTW9kYWwudHMiLCAic3JjL2RhdGEvSGVyb0RhdGEudHMiLCAic3JjL3ZpZXcvSGVyb0xpc3RWaWV3LnRzIiwgInNyYy9kYXRhL0hlcm9NYW5hZ2VyLnRzIiwgInNyYy9kYXRhL0RhdGFTaGVldC50cyIsICJzcmMvdmlldy9WaWV3T3BlbmVyLnRzIiwgInNyYy9tb2RhbC9Db25maXJtV2FybmluZ01vZGFsLnRzIiwgInNyYy92aWV3L0hlcm9PdmVydmlldy50cyIsICJzcmMvdmlldy9Ub2tlbml6ZXJWaWV3LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge0FwcCwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBXb3Jrc3BhY2VMZWFmfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7SGVyb0xpc3RWaWV3LCBWSUVXX0hFUk9fTElTVH0gZnJvbSBcIi4vc3JjL3ZpZXcvSGVyb0xpc3RWaWV3XCI7XHJcbmltcG9ydCB7SGVyb01hbmFnZXJ9IGZyb20gXCIuL3NyYy9kYXRhL0hlcm9NYW5hZ2VyXCI7XHJcbmltcG9ydCB7SGVyb0RhdGF9IGZyb20gXCIuL3NyYy9kYXRhL0hlcm9EYXRhXCI7XHJcbmltcG9ydCB7Vmlld09wZW5lcn0gZnJvbSBcIi4vc3JjL3ZpZXcvVmlld09wZW5lclwiO1xyXG5pbXBvcnQge0hlcm9PdmVydmlldywgVklFV19IRVJPX09WRVJWSUVXfSBmcm9tIFwiLi9zcmMvdmlldy9IZXJvT3ZlcnZpZXdcIjtcclxuaW1wb3J0IHtUb2tlbml6ZXJWaWV3LCBWSUVXX1RPS0VOSVpFUn0gZnJvbSBcIi4vc3JjL3ZpZXcvVG9rZW5pemVyVmlld1wiO1xyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgRFNBUGx1Z2luU2V0dGluZ3Mge1xyXG5cdGhlcm9QYXRoOiBzdHJpbmc7XHJcblx0b3B0b2xpdGhQYXRoOiBzdHJpbmc7XHJcblx0aGVyb2VzTGlzdDogSGVyb0RhdGFbXTtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRFNBUGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0aGVyb1BhdGg6IFwiXCIsXHJcblx0b3B0b2xpdGhQYXRoOiBcIlwiLFxyXG5cdGhlcm9lc0xpc3Q6IFtdXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERTQVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IERTQVBsdWdpblNldHRpbmdzO1xyXG5cdGhlcm9NYW5hZ2VyOiBIZXJvTWFuYWdlcjtcclxuXHR2aWV3T3BlbmVyOiBWaWV3T3BlbmVyO1xyXG5cclxuXHRpbmplY3RTVkdGaWx0ZXIoKSB7XHJcblx0XHRjb25zdCBzdmdGaWx0ZXIgPSBgXHJcbiAgICAgICAgICAgIDxzdmcgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+XHJcbiAgICAgICAgICAgICAgICA8ZmlsdGVyIGlkPVwid2F2eTJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZmVUdXJidWxlbmNlIHg9XCIwXCIgeT1cIjBcIiBiYXNlRnJlcXVlbmN5PVwiMC4wMlwiIG51bU9jdGF2ZXM9XCI1XCIgc2VlZD1cIjFcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxmZURpc3BsYWNlbWVudE1hcCBpbj1cIlNvdXJjZUdyYXBoaWNcIiBzY2FsZT1cIjIwXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvZmlsdGVyPlxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICBgO1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBzdmdGaWx0ZXIpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMuaGVyb01hbmFnZXIgPSBuZXcgSGVyb01hbmFnZXIodGhpcyk7XHJcblx0XHR0aGlzLnZpZXdPcGVuZXIgPSBuZXcgVmlld09wZW5lcih0aGlzKTtcclxuXHJcblx0XHR0aGlzLmluamVjdFNWR0ZpbHRlcigpO1xyXG5cclxuXHRcdGNvbnN0IGRzYVJpYmJvbiA9IHRoaXMuYWRkUmliYm9uSWNvbignZGljZScsICdIZWxkZW5saXN0ZScsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0dGhpcy52aWV3T3BlbmVyLm9wZW5IZXJvTGlzdFZpZXcoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIHVzZWFibGUgYW55d2hlcmVcclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnb3Blbi1jaGFyYWN0ZXJzLXZpZXcnLFxyXG5cdFx0XHRuYW1lOiAnSGVsZGVubGlzdGUgXHUwMEY2ZmZuZW4nLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMudmlld09wZW5lci5vcGVuSGVyb0xpc3RWaWV3KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIGluaXQgc2V0dGluZ3MgdGFiXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IERTQVNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgdmlld1xyXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXHJcblx0XHRcdFZJRVdfSEVST19MSVNULFxyXG5cdFx0XHQobGVhZikgPT4ge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgSGVyb0xpc3RWaWV3KGxlYWYsIHRoaXMpXHJcblx0XHRcdH0sXHJcblx0XHQpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXHJcblx0XHRcdFZJRVdfSEVST19PVkVSVklFVyxcclxuXHRcdFx0KGxlYWYpID0+IHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IEhlcm9PdmVydmlldyhsZWFmLCB0aGlzKVxyXG5cdFx0XHR9LFxyXG5cdFx0KVxyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxyXG5cdFx0XHRWSUVXX1RPS0VOSVpFUixcclxuXHRcdFx0KGxlYWYpID0+IHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFRva2VuaXplclZpZXcobGVhZiwgdGhpcylcclxuXHRcdFx0fSxcclxuXHRcdClcclxuXHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxufVxyXG5cclxuY2xhc3MgRFNBU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IERTQVBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRFNBUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnSGVybyBMb2NhdGlvbicpXHJcblx0XHRcdC5zZXREZXNjKCdXaGVyZSBkbyB5b3Ugd2FudCB0byBoYXZlIHlvdXIgY2hhcmFjdGVyIGZpbGVzIHNhdmVkPycpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignL3BhdGgvdG8vY2hhcmFjdGVycycpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhlcm9QYXRoKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhlcm9QYXRoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ09wdG9saXRoIGluc3RhbGwgbG9jYXRpb24nKVxyXG5cdFx0XHQuc2V0RGVzYygnV2hlcmUgaXMgT3B0b2xpdGggaW5zdGFsbGVkPycpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignL3BhdGgvdG8vb3B0b2xpdGgnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcHRvbGl0aFBhdGgpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3B0b2xpdGhQYXRoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHsgSWNvbk5hbWUsIEl0ZW1WaWV3LCBOb3RpY2UsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBEU0FQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcclxuaW1wb3J0IHsgZXhlYywgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcclxuaW1wb3J0IHtDcmVhdGVIZXJvTW9kYWx9IGZyb20gXCIuLi9tb2RhbC9DcmVhdGVIZXJvTW9kYWxcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEU0FWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xyXG5cclxuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgcGx1Z2luOiBEU0FQbHVnaW47XHJcblxyXG5cdHByb3RlY3RlZCBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IERTQVBsdWdpbikge1xyXG5cdFx0c3VwZXIobGVhZik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGFic3RyYWN0IGdldFRpdGxlKCk6IHN0cmluZztcclxuXHJcblx0Z2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBcIkRTQSAtIFwiO1xyXG5cdH1cclxuXHJcblx0Z2V0SWNvbigpOiBJY29uTmFtZSB7XHJcblx0XHRyZXR1cm4gJ2RpY2UnO1xyXG5cdH1cclxuXHJcblx0cHJvdGVjdGVkIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoXCJkc2Etdmlld1wiKTtcclxuXHJcblx0XHRjb25zdCBoZWFkZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdih7Y2xzOiBcImRzYS1oZWFkZXJcIiB9KTtcclxuXHJcblx0XHRjb25zdCBiYW5uZXIgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcImRzYS1iYW5uZXJcIn0pO1xyXG5cclxuXHRcdGNvbnN0IG5hdmlnYXRpb25Cb3ggPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcImRzYS1uYXZpZ2F0aW9uLWJveFwifSk7XHJcblx0XHRjb25zdCBuYXZpZ2F0aW9uID0gbmF2aWdhdGlvbkJveC5jcmVhdGVFbChcInVsXCIpO1xyXG5cclxuXHRcdG5hdmlnYXRpb24uY3JlYXRlRWwoXCJsaVwiKS5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiSGVsZGVubGlzdGVcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi52aWV3T3BlbmVyLm9wZW5IZXJvTGlzdFZpZXcoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0bmF2aWdhdGlvbi5jcmVhdGVFbChcImxpXCIpLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJOZXVlciBIZWxkXCIgfSkub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0bmV3IENyZWF0ZUhlcm9Nb2RhbCh0aGlzLnBsdWdpbiwgcmVzdWx0ID0+IHtcclxuXHJcblx0XHRcdFx0aWYgKCFyZXN1bHQubmFtZSB8fCAhcmVzdWx0LmlkKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQml0dGUgTmFtZSB1bmQgSUQgZlx1MDBGQ3IgZGVuIEhlbGQgYW5nZWJlblwiKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIGNoZWNrIGlmIGlkIGFscmVhZHkgZXhpc3RzXHJcblx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmhlcm9NYW5hZ2VyLmdldEhlcm9EYXRhKHJlc3VsdC5pZCkpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJPcmRuZXJuYW1lIGJlcmVpdHMgdmVyZ2ViZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uaGVyb01hbmFnZXIuY3JlYXRlSGVybyhyZXN1bHQudG9IZXJvRGF0YSgpKTtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5oZXJvTWFuYWdlci5wdXNoTmV3RGF0YVNoZWV0KHJlc3VsdC5pZCwgcmVzdWx0LmRhdGFTaGVldCkudGhlbihyID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnZpZXdPcGVuZXIub3Blbkhlcm9PdmVydmlldyhyZXN1bHQuaWQpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0fSkub3BlbigpO1xyXG5cdFx0fTtcclxuXHJcblx0XHRuYXZpZ2F0aW9uLmNyZWF0ZUVsKFwibGlcIikuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIk9wdG9saXRoXCIgfSkub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5vcGVuT3B0b2xpdGgoKTtcclxuXHRcdH07XHJcblxyXG5cclxuXHRcdG5hdmlnYXRpb24uY3JlYXRlRWwoXCJsaVwiKS5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiVG9rZW5pemVyXCIgfSkub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5wbHVnaW4udmlld09wZW5lci5vcGVuVG9rZW5pemVyVmlldygpO1xyXG5cdFx0fTtcclxuXHJcblx0XHRoZWFkZXIuY3JlYXRlRWwoJ2gxJywge3RleHQ6IHRoaXMuZ2V0VGl0bGUoKSwgY2xzOiBcImRzYS12aWV3LXRpdGxlXCJ9KTtcclxuXHJcblx0XHRoZWFkZXIuY3JlYXRlRWwoXCJoclwiKVxyXG5cclxuXHJcblx0XHRyZXR1cm4gc3VwZXIub25PcGVuKCk7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVDb250ZW50RWxlbWVudChjbGF6ejogc3RyaW5nID0gXCJcIik6IEhUTUxFbGVtZW50IHtcclxuXHRcdHJldHVybiB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdih7Y2xzOiBgZHNhLWNvbnRlbnQgJHtjbGF6en1gfSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG9wZW5PcHRvbGl0aCgpIHtcclxuXHRcdGxldCBvcHRvbGl0aFBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcHRvbGl0aFBhdGg7XHJcblxyXG5cdFx0aWYgKCFvcHRvbGl0aFBhdGgpIHtcclxuXHRcdFx0bmV3IE5vdGljZShcIkJpdHRlIGRlbiBQZmFkIHp1IE9wdG9saXRoIGluIGRlbiBFaW5zdGVsbHVuZ2VuIGZlc3RsZWdlblwiKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSB0aGUgcGF0aCBpcyB3cmFwcGVkIGluIHF1b3Rlc1xyXG5cdFx0aWYgKCFvcHRvbGl0aFBhdGguc3RhcnRzV2l0aCgnXCInKSAmJiAhb3B0b2xpdGhQYXRoLmVuZHNXaXRoKCdcIicpKSB7XHJcblx0XHRcdG9wdG9saXRoUGF0aCA9IGBcIiR7b3B0b2xpdGhQYXRofVwiYDsgLy8gQWRkIHF1b3Rlc1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoZSBwcm9ncmFtIGlzIHJ1bm5pbmcgYW5kIGhhbmRsZSBhY2NvcmRpbmdseVxyXG5cdFx0aWYgKHRoaXMuaXNQcm9ncmFtUnVubmluZyhvcHRvbGl0aFBhdGgpKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJPcHRvbGl0aCBsXHUwMEU0dWZ0IGJlcmVpdHMuXCIpO1xyXG5cdFx0XHR0aGlzLmZvY3VzRXhpc3RpbmdQcm9ncmFtKG9wdG9saXRoUGF0aCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRleGVjKG9wdG9saXRoUGF0aCwgKGVycm9yLCBzdGRvdXQsIHN0ZGVycikgPT4ge1xyXG5cdFx0XHRcdGlmIChlcnJvcikge1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRmVobGVyIGJlaW0gXHUwMEQ2ZmZuZW4gdm9uIE9wdG9saXRoOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaXNQcm9ncmFtUnVubmluZyhwcm9ncmFtUGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBwcm9ncmFtTmFtZSA9IHRoaXMuZ2V0RXhlY3V0YWJsZU5hbWUocHJvZ3JhbVBhdGgpO1xyXG5cclxuXHRcdGxldCBjb21tYW5kOiBzdHJpbmc7XHJcblxyXG5cdFx0Ly8gRGV0ZXJtaW5lIHRoZSBjb21tYW5kIGJhc2VkIG9uIHRoZSBvcGVyYXRpbmcgc3lzdGVtXHJcblx0XHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xyXG5cdFx0XHRjb21tYW5kID0gYHRhc2tsaXN0IHwgZmluZHN0ciAvaSAke3Byb2dyYW1OYW1lfWA7XHJcblx0XHR9IGVsc2UgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICdkYXJ3aW4nKSB7XHJcblx0XHRcdGNvbW1hbmQgPSBgcGdyZXAgLWYgJHtwcm9ncmFtTmFtZX1gO1xyXG5cdFx0fSBlbHNlIHsgLy8gQXNzdW1lIExpbnV4XHJcblx0XHRcdGNvbW1hbmQgPSBgcGdyZXAgLWYgJHtwcm9ncmFtTmFtZX1gO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGV4ZWNTeW5jKGNvbW1hbmQsIHsgc3RkaW86ICdwaXBlJyB9KTtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHJldHVybiBmYWxzZTsgLy8gSWYgZXhlY1N5bmMgdGhyb3dzLCBpdCBtZWFucyBubyBpbnN0YW5jZXMgd2VyZSBmb3VuZFxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBmb2N1c0V4aXN0aW5nUHJvZ3JhbShwcm9ncmFtUGF0aDogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBwcm9ncmFtTmFtZSA9IHRoaXMuZ2V0RXhlY3V0YWJsZU5hbWUocHJvZ3JhbVBhdGgpLnJlcGxhY2UoJy5leGUnLCAnJykucmVwbGFjZShcIlxcXCJcIiwgXCJcIik7IC8vIFJlbW92ZSAuZXhlIGZvciBmb2N1c2luZ1xyXG5cclxuXHRcdC8vIHRvZG86IGZpeFxyXG5cdFx0Ly8gaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicpIHtcclxuXHRcdC8vIFx0Ly8gVXNlIFBvd2VyU2hlbGwgdG8gZm9jdXMgdGhlIHdpbmRvd1xyXG5cdFx0Ly8gXHRjb25zdCBjb21tYW5kID0gYFxyXG4gICAgICAgIC8vICAgICAgICAgcG93ZXJzaGVsbCAtQ29tbWFuZCBcIlxyXG4gICAgICAgIC8vICAgICAgICAgJGFwcCA9IEdldC1Qcm9jZXNzIHwgV2hlcmUtT2JqZWN0IHsgJF8uTWFpbldpbmRvd1RpdGxlIC1saWtlICcqJHtwcm9ncmFtTmFtZX0qJyB9XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAoJGFwcCkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICRoYW5kbGUgPSAkYXBwLk1haW5XaW5kb3dIYW5kbGVcclxuICAgICAgICAvLyAgICAgICAgICAgICBbdm9pZF1bU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRUeXBlRnJvbUNMU0lEKFtHdWlkXTo6TmV3R3VpZCgpKS5JbnZva2VNZW1iZXIoJ1NldEZvcmVncm91bmRXaW5kb3cnLCAnSW52b2tlJywgJG51bGwsIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldE9iamVjdCgkaGFuZGxlKSwgJG51bGwpXHJcbiAgICAgICAgLy8gICAgICAgICB9XCJcclxuICAgICAgICAvLyAgICAgYDtcclxuXHRcdC8vIFx0ZXhlYyhjb21tYW5kLCAoZXJyb3IpID0+IHtcclxuXHRcdC8vIFx0XHRpZiAoZXJyb3IpIHtcclxuXHRcdC8vIFx0XHRcdG5ldyBOb3RpY2UoYEZlaGxlciBiZWltIEZva3Vzc2llcmVuIHZvbiBPcHRvbGl0aDogJHtlcnJvci5tZXNzYWdlfWApO1xyXG5cdFx0Ly8gXHRcdH1cclxuXHRcdC8vIFx0fSk7XHJcblx0XHQvLyB9IGVsc2UgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICdkYXJ3aW4nKSB7XHJcblx0XHQvLyBcdC8vIE9uIG1hY09TLCB1c2UgQXBwbGVTY3JpcHQgdG8gZm9jdXMgdGhlIGFwcGxpY2F0aW9uXHJcblx0XHQvLyBcdGV4ZWMoYG9zYXNjcmlwdCAtZSAndGVsbCBhcHBsaWNhdGlvbiBcIiR7cHJvZ3JhbU5hbWV9XCIgdG8gYWN0aXZhdGUnYCwgKGVycm9yKSA9PiB7XHJcblx0XHQvLyBcdFx0aWYgKGVycm9yKSB7XHJcblx0XHQvLyBcdFx0XHRuZXcgTm90aWNlKGBGZWhsZXIgYmVpbSBGb2t1c3NpZXJlbiB2b24gT3B0b2xpdGg6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuXHRcdC8vIFx0XHR9XHJcblx0XHQvLyBcdH0pO1xyXG5cdFx0Ly8gfSBlbHNlIHtcclxuXHRcdC8vIFx0Ly8gRm9yIExpbnV4LCB5b3UgbWlnaHQgbmVlZCBhIGRpZmZlcmVudCBhcHByb2FjaCwgbGlrZSB1c2luZyB3bWN0cmxcclxuXHRcdC8vIFx0ZXhlYyhgd21jdHJsIC1hIFwiJHtwcm9ncmFtTmFtZX1cImAsIChlcnJvcikgPT4ge1xyXG5cdFx0Ly8gXHRcdGlmIChlcnJvcikge1xyXG5cdFx0Ly8gXHRcdFx0bmV3IE5vdGljZShgRmVobGVyIGJlaW0gRm9rdXNzaWVyZW4gdm9uIE9wdG9saXRoOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcblx0XHQvLyBcdFx0fVxyXG5cdFx0Ly8gXHR9KTtcclxuXHRcdC8vIH1cclxuXHR9XHJcblxyXG5cdC8vIEZ1bmN0aW9uIHRvIGV4dHJhY3QgdGhlIGV4ZWN1dGFibGUgbmFtZSBmcm9tIHRoZSBwcm9ncmFtIHBhdGhcclxuXHRwcml2YXRlIGdldEV4ZWN1dGFibGVOYW1lKHByb2dyYW1QYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgcGFydHMgPSBwcm9ncmFtUGF0aC5zcGxpdCgvWy9cXFxcXS8pO1xyXG5cdFx0cmV0dXJuIHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdOyAvLyBHZXQgdGhlIGxhc3QgcGFydCB3aGljaCBpcyB0aGUgZXhlY3V0YWJsZSBuYW1lXHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHtBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmd9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgRFNBUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XHJcbmltcG9ydCB7SGVyb0RhdGF9IGZyb20gXCIuLi9kYXRhL0hlcm9EYXRhXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGVyb0NyZWF0aW9uRGF0YSBleHRlbmRzIEhlcm9EYXRhIHtcclxuXHJcblx0ZGF0YVNoZWV0OiBzdHJpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGF0YVNoZWV0OiBhbnkpIHtcclxuXHRcdHN1cGVyKGlkLCBuYW1lKTtcclxuICAgICAgICB0aGlzLmRhdGFTaGVldCA9IGRhdGFTaGVldDtcclxuXHR9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ3JlYXRlSGVyb01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogRFNBUGx1Z2luLCBvblN1Ym1pdDogKHJlc3VsdDogSGVyb0NyZWF0aW9uRGF0YSkgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIocGx1Z2luLmFwcCk7XHJcblx0XHR0aGlzLnNldFRpdGxlKCdEU0EgLSBOZXVlciBIZWxkJyk7XHJcblxyXG5cdFx0bGV0IGlkID0gJyc7XHJcblx0XHRsZXQgbmFtZSA9ICcnO1xyXG5cdFx0bGV0IGpzb25EYXRhID0ge307XHJcblx0XHRuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ09yZG5lcm5hbWUnKVxyXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cclxuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWQgPSB2YWx1ZTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdBbnplaWdlbmFtZScpXHJcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxyXG5cdFx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRuYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnT3B0b2xpdGggSnNvbiBEYXRlaScpXHJcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xyXG5cdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdDaG9vc2UgRmlsZScpLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdFx0XHRcdGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xyXG5cdFx0XHRcdFx0ZmlsZUlucHV0LmFjY2VwdCA9ICcuanNvbic7XHJcblx0XHRcdFx0XHRmaWxlSW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcblx0XHRcdFx0XHRmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRpZiAoIXRhcmdldC5maWxlcyB8fCAhdGFyZ2V0LmZpbGVzLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHRhcmdldC5maWxlc1swXTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVRleHQgPSBhd2FpdCBmaWxlLnRleHQoKTtcclxuXHJcblx0XHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0SlNPTi5wYXJzZShmaWxlVGV4dCk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnRmlsZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHkhJyk7XHJcblx0XHRcdFx0XHRcdFx0anNvbkRhdGEgPSBmaWxlVGV4dDtcclxuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdJbnZhbGlkIEpTT04gZmlsZScpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0XHRmaWxlSW5wdXQuY2xpY2soKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXHJcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cclxuXHRcdFx0XHRidG5cclxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdFcnN0ZWxsZW4nKVxyXG5cdFx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0b25TdWJtaXQobmV3IEhlcm9DcmVhdGlvbkRhdGEoaWQsIG5hbWUsIGpzb25EYXRhKSk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0fVxyXG59XHJcbiIsICJcclxuZXhwb3J0IGNsYXNzIEhlcm9EYXRhIHtcclxuXHRjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG5cdH1cclxuXHJcblx0dG9IZXJvRGF0YSgpOiBIZXJvRGF0YSB7XHJcblx0XHRyZXR1cm4gbmV3IEhlcm9EYXRhKHRoaXMuaWQsIHRoaXMubmFtZSk7XHJcblx0fVxyXG5cclxuXHRpZDogc3RyaW5nO1xyXG5cdG5hbWU6IHN0cmluZztcclxufVxyXG4iLCAiaW1wb3J0IHtXb3Jrc3BhY2VMZWFmfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBEU0FQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcclxuaW1wb3J0IHtIZXJvRGF0YX0gZnJvbSBcIi4uL2RhdGEvSGVyb0RhdGFcIjtcclxuaW1wb3J0IHtEU0FWaWV3fSBmcm9tIFwiLi9EU0FWaWV3XCI7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19IRVJPX0xJU1QgPSAnaGVyby1saXN0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBIZXJvTGlzdFZpZXcgZXh0ZW5kcyBEU0FWaWV3IHtcclxuXHJcblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBEU0FQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGxlYWYsIHBsdWdpbik7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGN1cnJlbnRseSBhY3RpdmUgbGVhZidzIHZpZXcgaXMgdGhlIG9uZSB5b3Ugd2FudCB0byB1cGRhdGVcclxuXHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIEhlcm9MaXN0Vmlldykge1xyXG5cdFx0XHRcdHRoaXMub25PcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gVklFV19IRVJPX0xJU1Q7XHJcblx0fVxyXG5cclxuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGAke3N1cGVyLmdldERpc3BsYXlUZXh0KCl9SGVsZGVubGlzdGVgO1xyXG5cdH1cclxuXHJcblx0Z2V0VGl0bGUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBcIkRlaW5lIEhlbGRlblwiO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25PcGVuKCkge1xyXG5cdFx0YXdhaXQgc3VwZXIub25PcGVuKCk7XHJcblxyXG5cdFx0Y29uc3QgbGlzdENvbnRhaW5lciA9IHRoaXMuY3JlYXRlQ29udGVudEVsZW1lbnQoVklFV19IRVJPX0xJU1QpO1xyXG5cclxuXHRcdGNvbnN0IHsgaGVyb01hbmFnZXIgfSA9IHRoaXMucGx1Z2luO1xyXG5cclxuXHRcdGhlcm9NYW5hZ2VyLnZhbGlkYXRlSGVyb0RhdGEoKTtcclxuXHJcblx0XHRjb25zdCBoZXJvZXMgPSBoZXJvTWFuYWdlci5nZXRIZXJvZXMoKTtcclxuXHJcblx0XHRjb25zdCBoZXJvTGlzdCA9IGxpc3RDb250YWluZXIuY3JlYXRlRGl2KCk7XHJcblx0XHRoZXJvTGlzdC5hZGRDbGFzcyhcImRzYS1oZXJvLWxpc3RcIik7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGhlcm9lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBoZXJvOiBIZXJvRGF0YSA9IGhlcm9lc1tpXTtcclxuXHJcblx0XHRcdGNvbnN0IGhlcm9JdGVtV3JhcHBlciA9IGhlcm9MaXN0LmNyZWF0ZURpdigpO1xyXG5cdFx0XHRoZXJvSXRlbVdyYXBwZXIuYWRkQ2xhc3MoXCJoZXJvLWl0ZW0td3JhcHBlclwiKTtcclxuXHJcblx0XHRcdGNvbnN0IGhlcm9JdGVtID0gaGVyb0l0ZW1XcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIpO1xyXG5cclxuXHRcdFx0aGVyb0l0ZW0uYWRkQ2xhc3MoXCJoZXJvLWl0ZW1cIik7XHJcblxyXG5cdFx0XHRoZXJvTWFuYWdlci5nZXRIZXJvRGF0YVNoZWV0KGhlcm8uaWQpLnRoZW4odmFsdWUgPT4ge1xyXG5cdFx0XHRcdGlmICghdmFsdWUpIHJldHVybjtcclxuXHRcdFx0XHRoZXJvSXRlbS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dmFsdWUuYXZhdGFyfSlgO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNvbnN0IG5hbWVXcmFwcGVyID0gaGVyb0l0ZW1XcmFwcGVyLmNyZWF0ZURpdigpO1xyXG5cdFx0XHRuYW1lV3JhcHBlci5hZGRDbGFzcyhcIm5hbWUtd3JhcHBlclwiKTtcclxuXHRcdFx0bmFtZVdyYXBwZXIuY3JlYXRlRGl2KHsgdGV4dDogaGVyby5uYW1lIH0pLmFkZENsYXNzKFwibmFtZVwiKVxyXG5cclxuXHRcdFx0aGVyb0l0ZW0ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi52aWV3T3BlbmVyLm9wZW5IZXJvT3ZlcnZpZXcoaGVyby5pZCk7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbkNsb3NlKCkge1xyXG5cdFx0Ly8gTm90aGluZyB0byBjbGVhbiB1cC5cclxuXHR9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgRFNBUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XHJcbmltcG9ydCB7SGVyb0RhdGF9IGZyb20gXCIuL0hlcm9EYXRhXCI7XHJcbmltcG9ydCB7RmlsZVN5c3RlbUFkYXB0ZXIsIE5vdGljZSwgVEZpbGUsIFRGb2xkZXJ9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQge0RhdGFTaGVldH0gZnJvbSBcIi4vRGF0YVNoZWV0XCI7XHJcbmltcG9ydCB7SGVyb092ZXJ2aWV3LCBWSUVXX0hFUk9fT1ZFUlZJRVd9IGZyb20gXCIuLi92aWV3L0hlcm9PdmVydmlld1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhlcm9NYW5hZ2VyIHtcclxuXHJcblx0cmVhZG9ubHkgcGx1Z2luOiBEU0FQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogRFNBUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlbG9hZERhdGEoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5sb2FkU2V0dGluZ3MoKTtcclxuXHR9XHJcblxyXG5cdHZhbGlkYXRlSGVyb0RhdGEoKSB7XHJcblxyXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVyb2VzTGlzdC5mb3JFYWNoKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cclxuXHRcdFx0Y29uc3QgZm9sZGVyTmFtZSA9IHZhbHVlLmlkXHJcblx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZXJvUGF0aCArIFwiL1wiICsgZm9sZGVyTmFtZTtcclxuXHJcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEZvbGRlckJ5UGF0aChmb2xkZXJQYXRoKSkge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHRnZXRIZXJvRGF0YShoZXJvSWQ6IHN0cmluZyk6IEhlcm9EYXRhIHwgdW5kZWZpbmVkIHtcclxuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZXJvZXNMaXN0LmZpbmQoaGVybyA9PiBoZXJvLmlkID09PSBoZXJvSWQpO1xyXG5cdH1cclxuXHJcblx0Z2V0SGVyb0RhdGFTaGVldChoZXJvSWQ6IHN0cmluZyk6IFByb21pc2U8RGF0YVNoZWV0IHwgdW5kZWZpbmVkPiB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcclxuXHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhlcm9QYXRoICsgXCIvXCIgKyBoZXJvSWQ7XHJcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gXCJkYXRhLmpzb25cIjtcclxuXHRcdFx0Y29uc3QgZmlsZVBhdGggPSBmb2xkZXJQYXRoICsgXCIvXCIgKyBmaWxlTmFtZTtcclxuXHJcblx0XHRcdC8vIEdldCB0aGUgZmlsZSBieSBwYXRoXHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKSBhcyBURmlsZTtcclxuXHJcblx0XHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZpbGUgbm90IGZvdW5kOiAke2ZpbGVQYXRofWApO1xyXG5cdFx0XHRcdHJlc29sdmUodW5kZWZpbmVkKTsgLy8gUmVzb2x2ZSB3aXRoIHVuZGVmaW5lZCBpZiB0aGUgZmlsZSBkb2Vzbid0IGV4aXN0XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZWFkIHRoZSBmaWxlIGFuZCBwYXJzZSBpdCBhcyBKU09OXHJcblx0XHRcdGNvbnN0IGRhdGFTaGVldCA9IGF3YWl0IHRoaXMucmVhZEpzb25GaWxlKGZpbGUpO1xyXG5cclxuXHRcdFx0cmVzb2x2ZShkYXRhU2hlZXQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRIZXJvZXMoKTogSGVyb0RhdGFbXSB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVyb2VzTGlzdDtcclxuXHR9XHJcblxyXG5cdGNyZWF0ZUhlcm8oaGVyb0RhdGE6IEhlcm9EYXRhKTogdm9pZCB7XHJcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZXJvZXNMaXN0LnB1c2goaGVyb0RhdGEpO1xyXG5cdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR0aGlzLnZhbGlkYXRlSGVyb0RhdGEoKTtcclxuXHR9XHJcblxyXG5cdGRlbGV0ZUhlcm8oaWQ6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZXJvZXNMaXN0LmZpbmRJbmRleChoZXJvID0+IGhlcm8uaWQgPT09IGlkKTtcclxuXHRcdGlmIChpbmRleCA+IC0xKSB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhlcm9lc0xpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZG9udCBkZWxldGUgZm9yIG5vd1xyXG5cdFx0Ly8gdGhpcy5kZWxldGVIZXJvRm9sZGVyKGlkKS50aGVuKHIgPT4ge30pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZGVsZXRlSGVyb0ZvbGRlcihoZXJvSWQ6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhlcm9QYXRoICsgXCIvXCIgKyBoZXJvSWQ7XHJcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xyXG5cdFx0aWYgKGZvbGRlcikge1xyXG5cdFx0XHQvLyB0b2RvOiBkb2VzbnQgcmVhbGx5IHdvcmsgb25seSBkZWxldGVzIGZpbGVzIGluc2lkZSB0aGUgZm9sZGVyXHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJtZGlyKGZvbGRlclBhdGgsIHRydWUpXHJcblxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgcHVzaE5ld0RhdGFTaGVldChoZXJvSWQ6IHN0cmluZywganNvbkRhdGE6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlTmV3RGF0YVNoZWV0KGhlcm9JZCwganNvbkRhdGEpO1xyXG5cclxuXHRcdHRoaXMuZXh0cmFjdFBvcnRyYWl0QXNGaWxlKGhlcm9JZCkudGhlbigpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZXh0cmFjdFBvcnRyYWl0QXNGaWxlKGhlcm9JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBoZXJvRGF0YVNoZWV0ID0gYXdhaXQgdGhpcy5nZXRIZXJvRGF0YVNoZWV0KGhlcm9JZCk7XHJcblx0XHRjb25zdCBhdmF0YXIgPSBoZXJvRGF0YVNoZWV0Py5hdmF0YXI7XHJcblx0XHRpZiAoIWF2YXRhcikgcmV0dXJuO1xyXG5cdFx0Y29uc3QgZm9sZGVyUGF0aCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmhlcm9QYXRofS8ke2hlcm9JZH1gO1xyXG5cdFx0Y29uc3QgZmlsZW5hbWUgPSBgcG9ydHJhaXQucG5nYDtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZUJhc2U2NEltYWdlKGF2YXRhciwgYCR7Zm9sZGVyUGF0aH0vJHtmaWxlbmFtZX1gKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGF2YXRhciBpbWFnZTonLCBlcnJvcik7XHJcblx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIGF2YXRhciBmb3IgaGVyb0lkOiAke2hlcm9JZH1gKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVCYXNlNjRJbWFnZShiYXNlNjREYXRhOiBzdHJpbmcsIGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFJlbW92ZSB0aGUgZGF0YSBVUkwgcHJlZml4IGlmIGl0IGV4aXN0c1xyXG5cdFx0Y29uc3QgYmFzZTY0SW1hZ2UgPSBiYXNlNjREYXRhLnJlcGxhY2UoL15kYXRhOmltYWdlXFwvcG5nO2Jhc2U2NCwvLCBcIlwiKTtcclxuXHJcblx0XHQvLyBEZWNvZGUgdGhlIGJhc2U2NCBzdHJpbmdcclxuXHRcdGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0SW1hZ2UpO1xyXG5cdFx0Y29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcclxuXHRcdGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcclxuXHJcblx0XHQvLyBDb252ZXJ0IGJpbmFyeSBzdHJpbmcgdG8gYnl0ZXNcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuXHRcdFx0Ynl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDcmVhdGUgYW4gQXJyYXlCdWZmZXIgZnJvbSB0aGUgVWludDhBcnJheVxyXG5cdFx0Y29uc3QgYXJyYXlCdWZmZXIgPSBieXRlcy5idWZmZXI7XHJcblxyXG5cdFx0Ly8gVXNlIHRoZSBPYnNpZGlhbiBBUEkgdG8gc2F2ZSB0aGUgZmlsZSBhcyBiaW5hcnlcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGVCaW5hcnkoZmlsZVBhdGgsIGFycmF5QnVmZmVyKTtcclxuXHR9XHJcblxyXG5cclxuXHRhc3luYyBzYXZlTmV3RGF0YVNoZWV0KGhlcm9JZDogc3RyaW5nLCBqc29uRGF0YTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBmb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGVyb1BhdGh9LyR7aGVyb0lkfWA7XHJcblx0XHRjb25zdCBmaWxlTmFtZSA9IFwiZGF0YS5qc29uXCI7XHJcblx0XHRjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcclxuXHJcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpIGFzIFRGb2xkZXI7XHJcblxyXG5cdFx0aWYgKGZvbGRlcikge1xyXG5cdFx0XHQvLyBJZiB0aGUgZm9sZGVyIGV4aXN0cywgc2F2ZSB0aGUgSlNPTiBkYXRhIHRvIHRoZSBmaWxlXHJcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZUpzb25Ub0ZpbGUoZmlsZVBhdGgsIGpzb25EYXRhKTsgLy8gQXdhaXQgdGhlIHNhdmluZ1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmb2xkZXIgaWYgaXQgZG9lcyBub3QgZXhpc3RcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpOyAvLyBBd2FpdCBmb2xkZXIgY3JlYXRpb25cclxuXHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVKc29uVG9GaWxlKGZpbGVQYXRoLCBqc29uRGF0YSk7IC8vIEF3YWl0IHRoZSBzYXZpbmcgYWZ0ZXIgZm9sZGVyIGNyZWF0aW9uXHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXI6ICR7ZXJyb3J9YCk7XHJcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3IgY3JlYXRpbmcgZm9sZGVyOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlYWRKc29uRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8RGF0YVNoZWV0IHwgdW5kZWZpbmVkPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0XHRjb25zdCBqc29uRGF0YSA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpO1xyXG5cdFx0XHRyZXR1cm4gRGF0YVNoZWV0LmZyb21Kc29uKGpzb25EYXRhKTsgIC8vIEF1dG9tYXRpY2FsbHkgbG9hZCB0aGUgb2JqZWN0XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIEpTT04gZmlsZTogJHtlcnJvcn1gKTtcclxuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVKc29uVG9GaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGpzb25EYXRhOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbanNvbkRhdGFdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcclxuXHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlQmluYXJ5KGZpbGVQYXRoLCBhd2FpdCB0aGlzLmJsb2JUb0FycmF5QnVmZmVyKGJsb2IpKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHNhdmluZyBmaWxlOiAke2Vycm9yfWApO1xyXG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvciBzYXZpbmcgZmlsZTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgYmxvYlRvQXJyYXlCdWZmZXIoYmxvYjogQmxvYik6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblx0XHRcdHJlYWRlci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHJlYWRlci5yZXN1bHQgYXMgQXJyYXlCdWZmZXIpO1xyXG5cdFx0XHRyZWFkZXIub25lcnJvciA9IHJlamVjdDtcclxuXHRcdFx0cmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7Tm90aWNlfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXR0cmlidXRlRGF0YSB7XHJcblx0aWQ6IHN0cmluZztcclxuXHR2YWx1ZTogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEl0ZW0ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdGdyOiBudW1iZXI7XHJcblx0YW1vdW50OiBudW1iZXI7XHJcblxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJhY2Uge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdGxwOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBBVFRSX01VID0gXCJBVFRSXzFcIjtcclxuZXhwb3J0IGNvbnN0IEFUVFJfS0wgPSBcIkFUVFJfMlwiO1xyXG5leHBvcnQgY29uc3QgQVRUUl9JTiA9IFwiQVRUUl8zXCI7XHJcbmV4cG9ydCBjb25zdCBBVFRSX0NIID0gXCJBVFRSXzRcIjtcclxuZXhwb3J0IGNvbnN0IEFUVFJfRkYgPSBcIkFUVFJfNVwiO1xyXG5leHBvcnQgY29uc3QgQVRUUl9HRSA9IFwiQVRUUl82XCI7XHJcbmV4cG9ydCBjb25zdCBBVFRSX0tPID0gXCJBVFRSXzdcIjtcclxuZXhwb3J0IGNvbnN0IEFUVFJfS0sgPSBcIkFUVFJfOFwiXHJcblxyXG5leHBvcnQgY29uc3QgQURWX01BR0lDID0gXCJBRFZfNTBcIjtcclxuZXhwb3J0IGNvbnN0IEFEVl9DT05TRUNSQVRFRCA9IFwiQURWXzEyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgUkFDRV9IVU1BTiA9IFwiUl8xXCI7XHJcbmV4cG9ydCBjb25zdCBSQUNFX0VMRiA9IFwiUl8yXCI7XHJcbmV4cG9ydCBjb25zdCBSQUNFX0hBTEZFTEYgPSBcIlJfM1wiO1xyXG5leHBvcnQgY29uc3QgUkFDRV9EV0FSRiA9IFwiUl80XCI7XHJcblxyXG5jb25zdCBSYWNlczogUmFjZVtdID0gW1xyXG5cdHtcclxuXHRcdGlkOiBSQUNFX0hVTUFOLFxyXG5cdFx0bmFtZTogXCJNZW5zY2hcIixcclxuXHRcdGxwOiA1LFxyXG5cdH0sXHJcblx0e1xyXG5cdFx0aWQ6IFJBQ0VfRUxGLFxyXG4gICAgICAgIG5hbWU6IFwiRWxmXCIsXHJcbiAgICAgICAgbHA6IDIsXHJcblx0fSxcclxuXHR7XHJcbiAgICAgICAgaWQ6IFJBQ0VfSEFMRkVMRixcclxuICAgICAgICBuYW1lOiBcIkhhbGZlbGZcIixcclxuICAgICAgICBscDogNSxcclxuICAgIH0sXHJcblx0e1xyXG5cdFx0aWQ6IFJBQ0VfRFdBUkYsXHJcbiAgICAgICAgbmFtZTogXCJad2VyZ1wiLFxyXG4gICAgICAgIGxwOiA4LFxyXG5cdH1cclxuXVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFTaGVldCB7XHJcblx0bmFtZTogc3RyaW5nID0gXCJVbmtub3duIEhlcm9cIjtcclxuXHRhdmF0YXI6IHN0cmluZyA9IFwiXCI7XHJcblx0YXA6IHtcclxuXHRcdHRvdGFsOiBudW1iZXI7XHJcblx0fSA9IHtcclxuXHRcdHRvdGFsOiAwXHJcblx0fTtcclxuXHRyOiBzdHJpbmcgPSBcIlwiO1xyXG5cdHBlcnM6IHtcclxuXHRcdGZhbWlseTogc3RyaW5nO1xyXG5cdFx0cGxhY2VvZmJpcnRoOiBzdHJpbmc7XHJcblx0XHRkYXRlb2ZiaXJ0aDogc3RyaW5nO1xyXG5cdFx0YWdlOiBudW1iZXI7XHJcblx0XHRzaXplOiBzdHJpbmc7XHJcblx0XHR3ZWlnaHQ6IHN0cmluZztcclxuXHRcdHRpdGxlOiBzdHJpbmc7XHJcblx0fSA9IHtcclxuXHRcdGZhbWlseTogXCJcIixcclxuXHRcdHBsYWNlb2ZiaXJ0aDogXCJcIixcclxuXHRcdGRhdGVvZmJpcnRoOiBcIlwiLFxyXG5cdFx0YWdlOiAwLFxyXG5cdFx0c2l6ZTogXCJcIixcclxuXHRcdHdlaWdodDogXCJcIixcclxuXHRcdHRpdGxlOiBcIlwiXHJcblx0fTtcclxuXHRhdHRyOiB7XHJcblx0XHR2YWx1ZXM6IEF0dHJpYnV0ZURhdGFbXTtcclxuXHRcdGF0dHJpYnV0ZUFkanVzdG1lbnRTZWxlY3RlZDogc3RyaW5nO1xyXG5cdFx0YWU6IG51bWJlcjtcclxuXHRcdGtwOiBudW1iZXI7XHJcblx0XHRscDogbnVtYmVyO1xyXG5cdFx0cGVybWFuZW50QUU6IHtcclxuXHRcdFx0bG9zdDogbnVtYmVyO1xyXG4gICAgICAgICAgICByZWRlZW1lZDogbnVtYmVyO1xyXG5cdFx0fSxcclxuXHRcdHBlcm1hbmVudEtQOiB7XHJcblx0XHRcdGxvc3Q6IG51bWJlcjtcclxuICAgICAgICAgICAgcmVkZWVtZWQ6IG51bWJlcjtcclxuXHRcdH0sXHJcblx0XHRwZXJtYW5lbnRMUDoge1xyXG5cdFx0XHRsb3N0OiBudW1iZXI7XHJcblx0XHR9XHJcblx0fSA9IHtcclxuXHRcdHZhbHVlczogW10sXHJcblx0XHRhdHRyaWJ1dGVBZGp1c3RtZW50U2VsZWN0ZWQ6IFwiXCIsXHJcblx0XHRhZTogMCxcclxuXHRcdGtwOiAwLFxyXG5cdFx0bHA6IDAsXHJcblx0XHRwZXJtYW5lbnRBRToge1xyXG5cdFx0XHRsb3N0OiAwLFxyXG5cdFx0XHRyZWRlZW1lZDogMFxyXG5cdFx0fSxcclxuXHRcdHBlcm1hbmVudEtQOiB7XHJcblx0XHRcdGxvc3Q6IDAsXHJcblx0XHRcdHJlZGVlbWVkOiAwXHJcblx0XHR9LFxyXG5cdFx0cGVybWFuZW50TFA6IHtcclxuXHRcdFx0bG9zdDogMFxyXG5cdFx0fVxyXG5cdH07XHJcblx0c2V4OiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuXHRiZWxvbmdpbmdzOiB7XHJcblx0XHRpdGVtczogSXRlbVtdXHJcblx0fVxyXG5cdGFjdGl2YXRhYmxlOiB7XHJcblxyXG5cdH0gPSB7fVxyXG5cclxuXHRnZXRSYWNlKCk6IFJhY2UgfCB1bmRlZmluZWQge1xyXG5cdFx0cmV0dXJuIFJhY2VzLmZpbmQoKHJhY2UpID0+IHJhY2UuaWQgPT09IHRoaXMucik7XHJcblx0fVxyXG5cclxuXHRnZXRNYXhIZWFsdGgoKTogbnVtYmVyIHtcclxuXHRcdGNvbnN0IGtvID0gdGhpcy5nZXRBdHRyaWJ1dGVCeUlkKEFUVFJfS08pO1xyXG5cdFx0bGV0IGJhc2VWYWx1ZSA9ICh0aGlzLmdldFJhY2UoKT8ubHAgfHwgMCkgKyBrbyArIGtvO1xyXG5cdFx0YmFzZVZhbHVlICs9IHRoaXMuYXR0ci5scDtcclxuXHRcdGJhc2VWYWx1ZSAtPSB0aGlzLmF0dHIucGVybWFuZW50TFAubG9zdDtcclxuXHRcdHJldHVybiBiYXNlVmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXRNYXhBc3RyYWxFbmVyZ3koKTogbnVtYmVyIHtcclxuXHRcdGlmICghdGhpcy5oYXNBY3RpdmF0YWJsZShBRFZfTUFHSUMpKSB7XHJcblx0XHRcdHJldHVybiAwO1xyXG5cdFx0fVxyXG5cdFx0bGV0IGJhc2VWYWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlQnlJZCh0aGlzLmF0dHIuYXR0cmlidXRlQWRqdXN0bWVudFNlbGVjdGVkKSArIDIwO1xyXG5cdFx0YmFzZVZhbHVlIC09IHRoaXMuYXR0ci5hZTtcclxuXHRcdGJhc2VWYWx1ZSAtPSB0aGlzLmF0dHIucGVybWFuZW50QUUubG9zdCArIHRoaXMuYXR0ci5wZXJtYW5lbnRBRS5yZWRlZW1lZDtcclxuXHRcdHJldHVybiBiYXNlVmFsdWU7XHJcblx0fVxyXG5cclxuXHRnZXRNYXhLYXJtYUVuZXJneSgpOiBudW1iZXIge1xyXG5cdFx0aWYgKCF0aGlzLmhhc0FjdGl2YXRhYmxlKEFEVl9DT05TRUNSQVRFRCkpIHtcclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9XHJcblx0XHRsZXQgYmFzZVZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGVCeUlkKHRoaXMuYXR0ci5hdHRyaWJ1dGVBZGp1c3RtZW50U2VsZWN0ZWQpICsgMjA7XHJcblx0XHRiYXNlVmFsdWUgLT0gdGhpcy5hdHRyLmtwO1xyXG5cdFx0YmFzZVZhbHVlIC09IHRoaXMuYXR0ci5wZXJtYW5lbnRLUC5sb3N0ICsgdGhpcy5hdHRyLnBlcm1hbmVudEtQLnJlZGVlbWVkO1xyXG5cdFx0cmV0dXJuIGJhc2VWYWx1ZTtcclxuXHR9XHJcblxyXG5cdGdldEF0dHJpYnV0ZUJ5SWQoaWQ6IHN0cmluZyk6IG51bWJlciB7XHJcblx0XHRjb25zdCBhdHRyaWJ1dGUgPSB0aGlzLmF0dHIudmFsdWVzLmZpbmQoKGF0dHIpID0+IGF0dHIuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGUudmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDg7XHJcbiAgICAgICAgfVxyXG5cdH1cclxuXHJcblx0aGFzQWN0aXZhdGFibGUoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYWN0aXZhdGFibGUuaGFzT3duUHJvcGVydHkoaWQpO1xyXG5cdH1cclxuXHJcblx0Ly8gU3RhdGljIG1ldGhvZCB0byBjcmVhdGUgYSBuZXcgRGF0YVNoZWV0IGluc3RhbmNlIGZyb20gSlNPTlxyXG5cdHN0YXRpYyBmcm9tSnNvbihqc29uRGF0YTogYW55KTogRGF0YVNoZWV0IHtcclxuXHRcdGNvbnN0IGRhdGFTaGVldCA9IG5ldyBEYXRhU2hlZXQoKTtcclxuXHRcdE9iamVjdC5hc3NpZ24oZGF0YVNoZWV0LCBqc29uRGF0YSk7ICAvLyBBc3NpZ24gdGhlIEpTT04gZGF0YSB0byB0aGUgY2xhc3NcclxuXHRcdHJldHVybiBkYXRhU2hlZXQ7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQge1BhbmVUeXBlLCBWaWV3U3RhdGUsIFdvcmtzcGFjZSwgV29ya3NwYWNlTGVhZn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7VklFV19IRVJPX0xJU1R9IGZyb20gXCIuL0hlcm9MaXN0Vmlld1wiO1xyXG5pbXBvcnQgRFNBUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XHJcbmltcG9ydCB7VklFV19IRVJPX09WRVJWSUVXfSBmcm9tIFwiLi9IZXJvT3ZlcnZpZXdcIjtcclxuaW1wb3J0IHtWSUVXX1RPS0VOSVpFUn0gZnJvbSBcIi4vVG9rZW5pemVyVmlld1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZpZXdPcGVuZXIge1xyXG5cclxuXHRyZWFkb25seSBwbHVnaW46IERTQVBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBEU0FQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0b3BlblRva2VuaXplclZpZXcoKSB7XHJcblx0XHR0aGlzLm9wZW5PclJldmVhbFZpZXcoVklFV19UT0tFTklaRVIpO1xyXG5cdH1cclxuXHJcblx0b3Blbkhlcm9MaXN0VmlldygpIHtcclxuXHRcdHRoaXMub3Blbk9yUmV2ZWFsVmlldyhWSUVXX0hFUk9fTElTVCk7XHJcblx0fVxyXG5cclxuXHRvcGVuSGVyb092ZXJ2aWV3KGlkOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMub3BlblZpZXcoVklFV19IRVJPX09WRVJWSUVXLCB0cnVlLCB7IGlkIH0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb3Blbk9yUmV2ZWFsVmlldyh0eXBlOiBWaWV3U3RhdGVbXCJ0eXBlXCJdKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5wbHVnaW4uYXBwO1xyXG5cclxuXHRcdGxldCBsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XHJcblx0XHRjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKHR5cGUpO1xyXG5cclxuXHRcdGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBBIGxlYWYgd2l0aCBvdXIgdmlldyBhbHJlYWR5IGV4aXN0cywgdXNlIHRoYXRcclxuXHRcdFx0bGVhZiA9IGxlYXZlc1swXTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE91ciB2aWV3IGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgd29ya3NwYWNlLCBjcmVhdGUgYSBuZXcgbGVhZlxyXG5cdFx0XHQvLyBpbiB0aGUgcmlnaHQgc2lkZWJhciBmb3IgaXRcclxuXHRcdFx0bGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xyXG5cdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogdHlwZSwgYWN0aXZlOiB0cnVlIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFwiUmV2ZWFsXCIgdGhlIGxlYWYgaW4gY2FzZSBpdCBpcyBpbiBhIGNvbGxhcHNlZCBzaWRlYmFyXHJcblx0XHRpZiAobGVhZiBpbnN0YW5jZW9mIFdvcmtzcGFjZUxlYWYpIHtcclxuXHRcdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZikudGhlbihyID0+IHt9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIG9wZW5WaWV3KFxyXG5cdFx0dHlwZTogVmlld1N0YXRlW1widHlwZVwiXSxcclxuXHRcdG9wZW5Jbk5ld1RhYjogYm9vbGVhbixcclxuXHRcdHN0YXRlOiB1bmtub3duXHJcblx0KSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5wbHVnaW4uYXBwO1xyXG5cclxuXHRcdGNvbnN0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZihvcGVuSW5OZXdUYWIpO1xyXG5cdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xyXG5cdFx0XHR0eXBlLFxyXG5cdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHRzdGF0ZSxcclxuXHRcdH0pO1xyXG5cdFx0d29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZik7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHtNb2RhbCwgU2V0dGluZ30gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBEU0FQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcclxuaW1wb3J0IHtIZXJvQ3JlYXRpb25EYXRhfSBmcm9tIFwiLi9DcmVhdGVIZXJvTW9kYWxcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybU1vZGFsU3R5bGUge1xyXG5cdHRpdGxlOiBzdHJpbmc7XHJcblx0ZGVzY3JpcHRpb246IHN0cmluZztcclxuXHRjb25maXJtQnV0dG9uVGV4dDogc3RyaW5nO1xyXG5cdGNhbmNlbEJ1dHRvblRleHQ6IHN0cmluZztcclxufVxyXG5cclxuY29uc3QgZGVmYXVsdFN0eWxlOiBDb25maXJtTW9kYWxTdHlsZSA9IHtcclxuXHR0aXRsZTogXCJCZXN0XHUwMEU0dGlnZW4/XCIsXHJcbiAgICBkZXNjcmlwdGlvbjogXCJcIixcclxuICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIkJlc3RcdTAwRTR0aWdlblwiLFxyXG4gICAgY2FuY2VsQnV0dG9uVGV4dDogXCJBYmJyZWNoZW5cIixcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbmZpcm1XYXJuaW5nTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBEU0FQbHVnaW4sIHN0eWxlOiBDb25maXJtTW9kYWxTdHlsZSA9IGRlZmF1bHRTdHlsZSwgb25TdWJtaXQ6ICgpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKHBsdWdpbi5hcHApO1xyXG5cclxuXHRcdHRoaXMuc2V0VGl0bGUoc3R5bGUudGl0bGUpO1xyXG5cclxuXHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IHN0eWxlLmRlc2NyaXB0aW9uIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChzdHlsZS5jYW5jZWxCdXR0b25UZXh0KVxyXG5cdFx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHRcdH0pKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChzdHlsZS5jb25maXJtQnV0dG9uVGV4dClcclxuXHRcdFx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHRcdFx0LnNldFdhcm5pbmcoKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0XHRcdG9uU3VibWl0KCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblxyXG5cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7TW9kYWwsIE5vdGljZSwgU2V0dGluZywgVmlld1N0YXRlUmVzdWx0LCBXb3Jrc3BhY2VMZWFmfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBEU0FQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcclxuaW1wb3J0IHsgRFNBVmlldyB9IGZyb20gXCIuL0RTQVZpZXdcIjtcclxuaW1wb3J0IHsgSGVyb0RhdGEgfSBmcm9tIFwiLi4vZGF0YS9IZXJvRGF0YVwiO1xyXG5pbXBvcnQge0FUVFJfQ0gsIEFUVFJfRkYsIEFUVFJfR0UsIEFUVFJfSU4sIEFUVFJfS0ssIEFUVFJfS0wsIEFUVFJfS08sIEFUVFJfTVUsIERhdGFTaGVldH0gZnJvbSBcIi4uL2RhdGEvRGF0YVNoZWV0XCI7XHJcbmltcG9ydCB7Q29uZmlybVdhcm5pbmdNb2RhbCwgQ29uZmlybU1vZGFsU3R5bGV9IGZyb20gXCIuLi9tb2RhbC9Db25maXJtV2FybmluZ01vZGFsXCI7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19IRVJPX09WRVJWSUVXID0gJ2hlcm8tb3ZlcnZpZXcnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhlcm9PdmVydmlldyBleHRlbmRzIERTQVZpZXcge1xyXG5cdGlkOiBzdHJpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogRFNBUGx1Z2luKSB7XHJcblx0XHRzdXBlcihsZWFmLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5pZCA9IFwiXCI7XHJcblx0fVxyXG5cclxuXHRnZXRIZXJvRGF0YSgpOiBIZXJvRGF0YSB8IHVuZGVmaW5lZCB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbHVnaW4uaGVyb01hbmFnZXIuZ2V0SGVyb0RhdGEodGhpcy5pZCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXREYXRhU2hlZXQoKTogUHJvbWlzZTxEYXRhU2hlZXQ+IHtcclxuXHRcdGNvbnN0IGRhdGFTaGVldCA9IGF3YWl0IHRoaXMucGx1Z2luLmhlcm9NYW5hZ2VyLmdldEhlcm9EYXRhU2hlZXQodGhpcy5pZCk7XHJcblx0XHRpZiAoIWRhdGFTaGVldCkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IERhdGFTaGVldCgpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0cmV0dXJuIGRhdGFTaGVldDtcclxuXHR9XHJcblxyXG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYCR7c3VwZXIuZ2V0RGlzcGxheVRleHQoKX0gJHt0aGlzLmdldEhlcm9EYXRhKCk/Lm5hbWUgfHwgJ1Vua25vd24gSGVybyd9YDtcclxuXHR9XHJcblxyXG5cdGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gVklFV19IRVJPX09WRVJWSUVXO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25PcGVuKCkge1xyXG5cdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0Y29uc3QgaGVyb0lkOiBzdHJpbmcgPSB0aGlzLmdldFN0YXRlKCk/LmlkO1xyXG5cdFx0aWYgKGhlcm9JZCkge1xyXG5cdFx0XHR0aGlzLmlkID0gaGVyb0lkO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGF3YWl0IHN1cGVyLm9uT3BlbigpO1xyXG5cclxuXHRcdGNvbnN0IG92ZXJ2aWV3ID0gdGhpcy5jcmVhdGVDb250ZW50RWxlbWVudChcImRzYS1oZXJvLW92ZXJ2aWV3XCIpXHJcblxyXG5cdFx0Y29uc3QgZGF0YVNoZWV0ID0gYXdhaXQgdGhpcy5nZXREYXRhU2hlZXQoKTtcclxuXHJcblx0XHRjb25zdCBoZXJvUGFnZSA9IG92ZXJ2aWV3LmNyZWF0ZURpdih7Y2xzOiBcImhlcm8tcGFnZVwifSk7XHJcblxyXG5cdFx0Y29uc3QgYXR0cmlidXRlc0NhcmQgPSBoZXJvUGFnZS5jcmVhdGVEaXYoe2NsczogXCJoZXJvLWNhcmRcIn0pO1xyXG5cclxuXHRcdGF0dHJpYnV0ZXNDYXJkLmNyZWF0ZUVsKFwiaDFcIiwgeyBjbHM6IFwibmFtZVwiLCB0ZXh0OiBgJHtkYXRhU2hlZXQubmFtZSB8fCAnVW5rbm93biBIZXJvJ30gJHtkYXRhU2hlZXQucGVycy50aXRsZSA/IGBcIiR7ZGF0YVNoZWV0LnBlcnMudGl0bGV9XCJgIDogJyd9ICR7ZGF0YVNoZWV0LnBlcnMuZmFtaWx5IHx8ICcnfSAoJHtkYXRhU2hlZXQuYXAudG90YWx9IEFQKWAgfSk7XHJcblxyXG5cdFx0Y29uc3QgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNDYXJkLmNyZWF0ZURpdih7Y2xzOiBcImF0dHJpYnV0ZXNcIn0pO1xyXG5cdFx0dGhpcy5jcmVhdGVMYWJlbChhdHRyaWJ1dGVzLCBcIk1VXCIpLmNyZWF0ZURpdih7Y2xzOiBcImF0dHJpYnV0ZSBtdVwiLCB0ZXh0OiBgJHtkYXRhU2hlZXQ/LmdldEF0dHJpYnV0ZUJ5SWQoQVRUUl9NVSl9YH0pXHJcblx0XHR0aGlzLmNyZWF0ZUxhYmVsKGF0dHJpYnV0ZXMsIFwiS0xcIikuY3JlYXRlRGl2KHtjbHM6IFwiYXR0cmlidXRlIGtsXCIsIHRleHQ6IGAke2RhdGFTaGVldD8uZ2V0QXR0cmlidXRlQnlJZChBVFRSX0tMKX1gfSlcclxuXHRcdHRoaXMuY3JlYXRlTGFiZWwoYXR0cmlidXRlcywgXCJJTlwiKS5jcmVhdGVEaXYoe2NsczogXCJhdHRyaWJ1dGUgaW5cIiwgdGV4dDogYCR7ZGF0YVNoZWV0Py5nZXRBdHRyaWJ1dGVCeUlkKEFUVFJfSU4pfWB9KVxyXG5cdFx0dGhpcy5jcmVhdGVMYWJlbChhdHRyaWJ1dGVzLCBcIkNIXCIpLmNyZWF0ZURpdih7Y2xzOiBcImF0dHJpYnV0ZSBjaFwiLCB0ZXh0OiBgJHtkYXRhU2hlZXQ/LmdldEF0dHJpYnV0ZUJ5SWQoQVRUUl9DSCl9YH0pXHJcblx0XHR0aGlzLmNyZWF0ZUxhYmVsKGF0dHJpYnV0ZXMsIFwiRkZcIikuY3JlYXRlRGl2KHtjbHM6IFwiYXR0cmlidXRlIGZmXCIsIHRleHQ6IGAke2RhdGFTaGVldD8uZ2V0QXR0cmlidXRlQnlJZChBVFRSX0ZGKX1gfSlcclxuXHRcdHRoaXMuY3JlYXRlTGFiZWwoYXR0cmlidXRlcywgXCJHRVwiKS5jcmVhdGVEaXYoe2NsczogXCJhdHRyaWJ1dGUgZ2VcIiwgdGV4dDogYCR7ZGF0YVNoZWV0Py5nZXRBdHRyaWJ1dGVCeUlkKEFUVFJfR0UpfWB9KVxyXG5cdFx0dGhpcy5jcmVhdGVMYWJlbChhdHRyaWJ1dGVzLCBcIktPXCIpLmNyZWF0ZURpdih7Y2xzOiBcImF0dHJpYnV0ZSBrb1wiLCB0ZXh0OiBgJHtkYXRhU2hlZXQ/LmdldEF0dHJpYnV0ZUJ5SWQoQVRUUl9LTyl9YH0pXHJcblx0XHR0aGlzLmNyZWF0ZUxhYmVsKGF0dHJpYnV0ZXMsIFwiS0tcIikuY3JlYXRlRGl2KHtjbHM6IFwiYXR0cmlidXRlIGtrXCIsIHRleHQ6IGAke2RhdGFTaGVldD8uZ2V0QXR0cmlidXRlQnlJZChBVFRSX0tLKX1gfSlcclxuXHJcblx0XHRjb25zdCBwb3J0cmFpdENhcmQgPSBoZXJvUGFnZS5jcmVhdGVEaXYoe2NsczogXCJoZXJvLWNhcmQgcG9ydHJhaXQtY2FyZFwifSk7XHJcblxyXG5cdFx0Y29uc3QgaGVyb1BvcnRyYWl0ID0gcG9ydHJhaXRDYXJkLmNyZWF0ZURpdih7IGNsczogXCJoZXJvLXBvcnRyYWl0XCIgfSk7XHJcblx0XHRoZXJvUG9ydHJhaXQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2RhdGFTaGVldD8uYXZhdGFyfSlgO1xyXG5cclxuXHRcdGNvbnN0IGJhcnMgPSBwb3J0cmFpdENhcmQuY3JlYXRlRGl2KHtjbHM6IFwicHJvZ3Jlc3MtYmFyc1wifSk7XHJcblxyXG5cdFx0dGhpcy5jcmVhdGVMYWJlbChiYXJzLCBcIkxlYmVuc2VuZXJnaWVcIikuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQcm9ncmVzc2JhcihkYXRhU2hlZXQuZ2V0TWF4SGVhbHRoKCksIGRhdGFTaGVldC5nZXRNYXhIZWFsdGgoKSwgW1wiYmctaGVhbHRoXCJdKSlcclxuXHJcblx0XHRjb25zdCBtYXhBc3RyYWxFbmVyZ3kgPSBkYXRhU2hlZXQuZ2V0TWF4QXN0cmFsRW5lcmd5KCk7XHJcblx0XHRpZiAobWF4QXN0cmFsRW5lcmd5ID4gMCkge1xyXG5cdFx0XHR0aGlzLmNyZWF0ZUxhYmVsKGJhcnMsIFwiQXN0cmFsZW5lcmdpZVwiKS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVByb2dyZXNzYmFyKG1heEFzdHJhbEVuZXJneSwgbWF4QXN0cmFsRW5lcmd5LCBbXCJiZy1hc3RyYWxcIl0pKVxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IG1heEthcm1hRW5lcmd5ID0gZGF0YVNoZWV0LmdldE1heEthcm1hRW5lcmd5KCk7XHJcblx0XHRpZiAobWF4S2FybWFFbmVyZ3kgPiAwKSB7XHJcblx0XHRcdHRoaXMuY3JlYXRlTGFiZWwoYmFycywgXCJLYXJtYWVuZXJnaWVcIikuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQcm9ncmVzc2JhcihtYXhLYXJtYUVuZXJneSwgbWF4S2FybWFFbmVyZ3ksIFtcImJnLWthcm1hXCJdKSlcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBtYW5hZ2VCdXR0b25zID0gb3ZlcnZpZXcuY3JlYXRlRGl2KHtjbHM6IFwibWFuYWdlLWJ1dHRvbnNcIn0pO1xyXG5cclxuXHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IG1hbmFnZUJ1dHRvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkxcdTAwRjZzY2hlblwiLCBjbHM6IFwiYnV0dG9uIGRlbGV0ZVwiIH0pO1xyXG5cdFx0ZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG1vZGFsU3R5bGU6IENvbmZpcm1Nb2RhbFN0eWxlID0ge1xyXG5cdFx0XHRcdHRpdGxlOiBcIkhlbGQgbFx1MDBGNnNjaGVuP1wiLFxyXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNvbGwgZGVyIGF1c2dld1x1MDBFNGhsdGUgSGVybyB3aXJrbGljaCBnZWxcdTAwRjZzY2h0IHdlcmRlbj9cIixcclxuXHRcdFx0XHRjb25maXJtQnV0dG9uVGV4dDogXCJMXHUwMEY2c2NoZW5cIixcclxuXHRcdFx0XHRjYW5jZWxCdXR0b25UZXh0OiBcIkFiYnJlY2hlblwiXHJcblx0XHRcdH1cclxuXHRcdFx0bmV3IENvbmZpcm1XYXJuaW5nTW9kYWwodGhpcy5wbHVnaW4sIG1vZGFsU3R5bGUsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5oZXJvTWFuYWdlci5kZWxldGVIZXJvKHRoaXMuaWQpO1xyXG5cdFx0XHRcdHRoaXMubGVhZi5kZXRhY2goKTtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi52aWV3T3BlbmVyLm9wZW5IZXJvTGlzdFZpZXcoKTtcclxuXHRcdFx0fSkub3BlbigpO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdGNyZWF0ZUxhYmVsKHBhcmVudDogSFRNTEVsZW1lbnQsIGxhYmVsVGV4dDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG5cdFx0Y29uc3Qgd3JhcHBlciA9IHBhcmVudC5jcmVhdGVEaXYoe2NsczogXCJsYWJlbGVkLWVsZW1lbnRcIn0pXHJcblx0XHR3cmFwcGVyLmNyZWF0ZURpdih7IGNsczogXCJsYWJlbGVkLXRleHRcIiwgdGV4dDogbGFiZWxUZXh0IH0pO1xyXG5cdFx0cmV0dXJuIHdyYXBwZXI7XHJcblx0fVxyXG5cclxuXHRjcmVhdGVQcm9ncmVzc2JhcihtYXg6IG51bWJlciwgdmFsdWU6IG51bWJlciwgY2xhc3Nlczogc3RyaW5nW10pOiBIVE1MRGl2RWxlbWVudCB7XHJcblx0XHRjb25zdCBwcm9ncmVzcyA9IGNyZWF0ZURpdih7Y2xzOiBcInByb2dyZXNzXCJ9KTtcclxuXHJcblx0XHRjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzLmNyZWF0ZURpdih7Y2xzOiBcInByb2dyZXNzLWJhclwifSk7XHJcblx0XHRpZiAobWF4ID4gMCkge1xyXG4gICAgICAgIFx0cHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBgJHsodmFsdWUgLyBtYXgpICogMTAwfSVgO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBcIjAlXCI7XHJcblx0XHR9XHJcblx0XHRwcm9ncmVzc0Jhci5hZGRDbGFzc2VzKGNsYXNzZXMpO1xyXG5cclxuXHRcdHByb2dyZXNzLmNyZWF0ZURpdih7IGNsczogXCJwcm9ncmVzcy12YWx1ZS1sYWJlbFwiLCB0ZXh0OiBgJHt2YWx1ZX0gLyAke21heH1gIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvZ3Jlc3M7XHJcblx0fVxyXG5cclxuXHRnZXRTdGF0ZSgpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRpZDogdGhpcy5pZFxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc2V0U3RhdGUoXHJcblx0XHRzdGF0ZTogeyBpZDogc3RyaW5nIH0sXHJcblx0XHRyZXN1bHQ6IFZpZXdTdGF0ZVJlc3VsdFxyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0aWYgKHN0YXRlICYmIHR5cGVvZiBzdGF0ZSA9PT0gXCJvYmplY3RcIikge1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0XCJpZFwiIGluIHN0YXRlICYmXHJcblx0XHRcdFx0c3RhdGUuaWQgJiZcclxuXHRcdFx0XHR0eXBlb2Ygc3RhdGUuaWQgPT09IFwic3RyaW5nXCJcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0dGhpcy5pZCA9IHN0YXRlLmlkO1xyXG5cdFx0XHRcdHRoaXMub25PcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25DbG9zZSgpIHtcclxuXHR9XHJcblxyXG5cdGdldFRpdGxlKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYEhlbGRlblx1MDBGQ2JlcnNpY2h0YDtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7RFNBVmlld30gZnJvbSBcIi4vRFNBVmlld1wiO1xyXG5pbXBvcnQge1dvcmtzcGFjZUxlYWZ9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgRFNBUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19UT0tFTklaRVIgPSAndG9rZW5pemVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2tlbml6ZXJWaWV3IGV4dGVuZHMgRFNBVmlldyB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogRFNBUGx1Z2luKSB7XHJcblx0XHRzdXBlcihsZWFmLCBwbHVnaW4pO1xyXG5cdH1cclxuXHJcblx0Z2V0VGl0bGUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBcIlRva2VuaXplclwiO1xyXG5cdH1cclxuXHJcblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBWSUVXX1RPS0VOSVpFUjtcclxuXHR9XHJcblxyXG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gYCR7c3VwZXIuZ2V0RGlzcGxheVRleHQoKX1Ub2tlbml6ZXJgO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25PcGVuKCkge1xyXG5cdFx0YXdhaXQgc3VwZXIub25PcGVuKCk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgbmV3IEhUTUwgZWxlbWVudCBmb3IgdGhlIHdlYiB2aWV3XHJcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhbiBpZnJhbWUgdG8gbG9hZCB0aGUgd2VicGFnZVxyXG5cdFx0Y29uc3QgaWZyYW1lID0gY29udGFpbmVyLmNyZWF0ZUVsKCdpZnJhbWUnLCB7XHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRzcmM6IFwiaHR0cHM6Ly9yb2xsYWR2YW50YWdlLmNvbS90b2tlbnN0YW1wL1wiLFxyXG5cdFx0XHRcdHN0eWxlOiAnd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYm9yZGVyOiBub25lOycsIC8vIEVuc3VyZSBpdCBmaWxscyB0aGUgY29udGFpbmVyXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJlXHJcblx0fVxyXG5cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQW9FOzs7QUNBcEUsSUFBQUMsbUJBQTBEO0FBRTFELDJCQUErQjs7O0FDRi9CLHNCQUEwQzs7O0FDQ25DLElBQU0sV0FBTixNQUFlO0FBQUEsRUFDckIsWUFBWSxJQUFZLE1BQWM7QUFDckMsU0FBSyxLQUFLO0FBQ0osU0FBSyxPQUFPO0FBQUEsRUFDbkI7QUFBQSxFQUVBLGFBQXVCO0FBQ3RCLFdBQU8sSUFBSSxTQUFTLEtBQUssSUFBSSxLQUFLLElBQUk7QUFBQSxFQUN2QztBQUlEOzs7QURUTyxJ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QUFBQSxFQUNsQztBQUVEO0FBRUEsSUFBTSxpQkFBTixjQUE2QixrQ0FBaUI7QUFBQSxFQUc3QyxZQUFZLEtBQVUsUUFBbUI7QUFDeEMsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDZjtBQUFBLEVBRUEsVUFBZ0I7QUFDZixVQUFNLEVBQUMsWUFBVyxJQUFJO0FBRXRCLGdCQUFZLE1BQU07QUFFbEIsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsZUFBZSxFQUN2QixRQUFRLHVEQUF1RCxFQUMvRCxRQUFRLFVBQVEsS0FDZixlQUFlLHFCQUFxQixFQUNwQyxTQUFTLEtBQUssT0FBTyxTQUFTLFFBQVEsRUFDdEMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsV0FBSyxPQUFPLFNBQVMsV0FBVztBQUNoQyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDaEMsQ0FBQyxDQUFDO0FBQ0osUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsMkJBQTJCLEVBQ25DLFFBQVEsOEJBQThCLEVBQ3RDLFFBQVEsVUFBUSxLQUNmLGVBQWUsbUJBQW1CLEVBQ2xDLFNBQVMsS0FBSyxPQUFPLFNBQVMsWUFBWSxFQUMxQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQUM7QUFBQSxFQUNMO0FBRUQ7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibGVhZiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
